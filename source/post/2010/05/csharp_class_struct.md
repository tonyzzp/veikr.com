```toml
title = "c# 中class 和struct的区别"
slug = "csharp_class_struct"
desc = ""
date = "2010-05-23 20:51:14"
author = "admin"
tags = ["c#","class","struct","区别"]
```

<p>&nbsp;<span class="Apple-style-span" style="font-family: Verdana; line-height: 18px; font-size: 13px; "><span class="Apple-style-span" style="line-height: 15px; ">1，<span style="line-height: 15px; font-family: Verdana; ">class 是引用类型，structs是值类型</span></span>...</p></span>


<!--more-->

<p>&nbsp;<span class="Apple-style-span" style="font-family: Verdana; line-height: 18px; font-size: 13px; "><span class="Apple-style-span" style="line-height: 15px; ">1，<span style="line-height: 15px; font-family: Verdana; ">class 是引用类型，structs是值类型</span></span><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; "><span style="line-height: 15px; font-family: Verdana; "><span style="line-height: 15px; font-family: Verdana; ">既然class是引用类型，class可以设为null。但是我们不能将struct设为null,因为它是值类型。</span><br />&nbsp;&nbsp;&nbsp;&nbsp;</span></p><div style="padding-bottom: 4px; background-color: rgb(238, 238, 238); padding-left: 4px; width: 998px; padding-right: 5px; font-size: 13px; word-break: break-all; padding-top: 4px; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; "><span style="line-height: 15px; color: rgb(0, 0, 255); ">struct</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;AStruct<br />{<br />&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;aField;<br />}<br /></span><span style="line-height: 15px; color: rgb(0, 0, 255); ">class</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;&nbsp;AClass<br />{<br />&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;aField;<br />}<br /></span><span style="line-height: 15px; color: rgb(0, 0, 255); ">class</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MainClass<br />{<br /></span><span style="line-height: 15px; color: rgb(0, 0, 255); ">public</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">static</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">void</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;Main()<br />{<br />AClass&nbsp;b&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">null</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;No&nbsp;error.</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">AStruct&nbsp;s&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">null</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;Error&nbsp;[&nbsp;Cannot&nbsp;convert&nbsp;null&nbsp;to&nbsp;'AStruct'&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); "><br />because&nbsp;it&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">is</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;a&nbsp;value&nbsp;type&nbsp;].<br />}<br />}</span></div><br />2，<span style="line-height: 15px; font-family: Verdana; ">当你实例一个class，它将创建在堆上。而你实例一个struct，它将创建在栈上</span><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; "><span style="line-height: 15px; font-family: Verdana; ">3，你使用的是一个对class实例的引用。而你使用的不是对一个struct的引用。（而是直接使用它们）</span></p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; "><span style="line-height: 15px; font-family: Verdana; ">4，当我们将class作为参数传给一个方法，我们传递的是一个引用。struct传递的是值而非引用。</span></p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; "><span style="line-height: 15px; font-family: Verdana; ">5，structs 不可以有初始化器，class可以有初始化器。<br /></span></p><div style="padding-bottom: 4px; background-color: rgb(238, 238, 238); padding-left: 4px; width: 998px; padding-right: 5px; font-size: 13px; word-break: break-all; padding-top: 4px; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; "><span style="line-height: 15px; color: rgb(0, 0, 255); ">class</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyClass<br />{&nbsp;&nbsp;&nbsp;<br />&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myVar&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(128, 0, 128); ">10</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;&nbsp;no&nbsp;syntax&nbsp;error.&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;MyFun(&nbsp;)&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;&nbsp;statements&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">}<br /></span><span style="line-height: 15px; color: rgb(0, 0, 255); ">struct</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyStruct<br />{&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myVar&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(128, 0, 128); ">10</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;&nbsp;syntax&nbsp;error.&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">public</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">void</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyFun(&nbsp;)&nbsp;&nbsp;<br />&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;&nbsp;statements&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="line-he
ight: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">}</span></div><br /><br />6<p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; ">&nbsp;</p><span style="line-height: 15px; font-family: Verdana; ">Classes 可以有明显的无参数构造器，但是Struct不可以</span><br /><br /><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; ">&nbsp;</p><div style="padding-bottom: 4px; background-color: rgb(238, 238, 238); padding-left: 4px; width: 998px; padding-right: 5px; font-size: 13px; word-break: break-all; padding-top: 4px; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; "><span style="line-height: 15px; color: rgb(0, 0, 255); ">class</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyClass<br />{&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myVar&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;</span><span style="line-height: 15px; color: rgb(128, 0, 128); ">10</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">;&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">public</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyClass(&nbsp;)&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;no&nbsp;syntax&nbsp;error.&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;statements</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;}<br />}<br /></span><span style="line-height: 15px; color: rgb(0, 0, 255); ">struct</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyStruct<br />{&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myVar;&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">public</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyStruct(&nbsp;)&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;syntax&nbsp;error.</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;statements&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;&nbsp;&nbsp;}<br />}</span></div><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; "><br />7 类使用前必须new关键字实例化，Struct不需要<br />&nbsp;</p><div style="padding-bottom: 4px; background-color: rgb(238, 238, 238); padding-left: 4px; width: 998px; padding-right: 5px; font-size: 13px; word-break: break-all; padding-top: 4px; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; "><span style="line-height: 15px; color: rgb(0, 0, 0); ">MyClass&nbsp;aClassObj;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;&nbsp;MyClass&nbsp;aClassObj=new&nbsp;MyClass();&nbsp;is&nbsp;the&nbsp;correct&nbsp;format.aClassObj.</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">myVar</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(128, 0, 128); ">100</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">NullReferenceException(because&nbsp;aClassObj&nbsp;does&nbsp;not&nbsp;contain&nbsp;a&nbsp;reference&nbsp;to&nbsp;an&nbsp;object&nbsp;of&nbsp;type&nbsp;myClass).&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">MyStruct&nbsp;&nbsp;aStructObj;<br />aStructObj.myVar</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(128, 0, 128); ">100</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;&nbsp;no&nbsp;exception.</span></div><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; "><br />8 class支持继承和多态，Struct不支持. 注意：但是Struct 可以鹤类一样实现接口<br />9 既然Struct不支持继承，其成员不能以protected 或Protected Internal 修饰<br />10 Class的构造器不需要初始化全部字段，Struct的构造器必须初始化所有字段</p><div style="padding-bottom: 4px; background-color: rgb(238, 238, 238); padding-left: 4px; width: 998px; padding-right: 5px; font-size: 13px; word-break: break-all; padding-top: 4px; border-top-color: rgb(204, 204, 204); border-right-color: rgb(204, 204, 204); border-bottom-color: rgb(204, 204, 204); border-left-color: rgb(204, 204, 204); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; "><span style="line-height: 15px; color: rgb(0, 0, 255); ">class</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyClass&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">No&nbsp;error(&nbsp;No&nbsp;matter&nbsp;whether&nbsp;the&nbsp;Field&nbsp;'&nbsp;MyClass.myString&nbsp;'&nbsp;is&nbsp;initialized&nbsp;or&nbsp;not&nbsp;).&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">{&nbsp;<br />&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myInt;&nbsp;&nbsp;<br />&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">string</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myString;&nbsp;&nbsp;&nbsp;<br />&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">public</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyClass(&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;aInt&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs
p;{&nbsp;&nbsp;&nbsp;&nbsp;myInt&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;aInt;&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="line-height: 15px; color: rgb(0, 0, 255); ">struct</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyStruct&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">//</span><span style="line-height: 15px; color: rgb(0, 128, 0); ">&nbsp;Error&nbsp;(&nbsp;Field&nbsp;'&nbsp;MyStruct.myString&nbsp;'&nbsp;must&nbsp;be&nbsp;fully&nbsp;assigned&nbsp;before&nbsp;it&nbsp;leaves&nbsp;the&nbsp;constructor&nbsp;).</span><span style="line-height: 15px; color: rgb(0, 128, 0); "><br /></span><span style="line-height: 15px; color: rgb(0, 0, 0); ">{&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myInt;&nbsp;&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">string</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;myString;&nbsp;<br />&nbsp;&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">public</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;MyStruct(&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 255); ">int</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;aInt&nbsp;)&nbsp;<br />&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;myInt&nbsp;</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">=</span><span style="line-height: 15px; color: rgb(0, 0, 0); ">&nbsp;aInt;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;}<br />}</span></div><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; ">11 Class可以定义析构器但是Struct不可以<br />12 Class比较适合大的和复杂的数据，Struct适用于作为经常使用的一些数据组合成的新类型。</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; ">&nbsp;</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; ">&nbsp;</p><p style="margin-top: 5px; margin-right: auto; margin-bottom: 5px; margin-left: auto; text-indent: 0px; "><span style="color: rgb(128, 128, 128); ">转载自：</span><span class="Apple-style-span" style="font-family: Arial, Verdana, sans-serif; line-height: 19px; font-size: 12px; "><a href="http://www.cnblogs.com/waitrabbit/archive/2008/05/18/1202064.html"><span style="color: rgb(128, 128, 128); ">http://www.cnblogs.com/waitrabbit/archive/2008/05/18/1202064.html</span></a></span></p></span></p>
